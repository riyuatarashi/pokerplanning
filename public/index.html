<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Planning Poker</title>
    <!-- Tailwind via CDN (for development simplicity) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome (free version) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/png" href="favicon.svg" />
  </head>
  <body>
    <!-- Session Setup Screen -->
    <div id="setupScreen" class="screen active">
      <div class="setup-container">
        <div class="logo-container">
          <img src="favicon.svg" alt="Planning Poker Logo" class="logo-icon" />
          <h1 class="title">Planning Poker</h1>
          <p class="subtitle">Estimate with your team in real-time</p>
        </div>
        
        <div class="setup-form">
          <div class="input-group">
            <label for="displayNameInput">
              <i class="fas fa-user"></i> Your Display Name
            </label>
            <input
              type="text"
              id="displayNameInput"
              placeholder="Enter your name"
              maxlength="30"
            />
          </div>

          <div class="button-group">
            <button id="createSessionBtn" class="btn btn-primary btn-large">
              <i class="fas fa-plus-circle"></i> Create New Session
            </button>
            <div class="divider">
              <span>or</span>
            </div>
            <div class="input-group">
              <label for="sessionIdInput">
                <i class="fas fa-link"></i> Join Existing Session
              </label>
              <input
                type="text"
                id="sessionIdInput"
                placeholder="Enter session ID"
              />
            </div>
            <button id="joinSessionBtn" class="btn btn-secondary btn-large">
              <i class="fas fa-sign-in-alt"></i> Join Session
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Session Name Modal (Create) -->
    <div id="sessionNameModal" class="modal">
      <div class="modal-content">
        <h3><i class="fas fa-tag"></i> Name Your Session</h3>
        <div class="input-group">
          <input
            type="text"
            id="sessionNameInput"
            placeholder="e.g., Sprint 42 Planning"
            maxlength="50"
          />
        </div>
        <div class="modal-actions">
          <button id="confirmSessionNameBtn" class="btn btn-primary">
            <i class="fas fa-check"></i> Create
          </button>
        </div>
      </div>
    </div>

    <!-- Edit Name Modal (Generic) -->
    <div id="editNameModal" class="modal">
      <div class="modal-content">
        <h3 id="editModalTitle"><i class="fas fa-edit"></i> Edit Name</h3>
        <div class="input-group">
          <input
            type="text"
            id="editNameInput"
            placeholder="Enter new name"
            maxlength="50"
          />
        </div>
        <div class="modal-actions">
          <button id="cancelEditBtn" class="btn btn-secondary">
            <i class="fas fa-times"></i> Cancel
          </button>
          <button id="confirmEditBtn" class="btn btn-primary">
            <i class="fas fa-check"></i> Save
          </button>
        </div>
      </div>
    </div>

    <!-- Main Poker Planning Screen -->
    <div id="pokerScreen" class="screen">
      <div class="poker-container">
        <!-- Header -->
        <header class="poker-header">
          <div class="session-info">
            <div class="session-name-container">
              <h1 id="sessionNameDisplay" class="session-name">Planning Session</h1>
              <button id="editSessionNameBtn" class="icon-btn" title="Edit session name">
                <i class="fas fa-edit"></i>
              </button>
            </div>
            <div class="session-id-container">
              <span class="session-id" id="sessionIdDisplay"></span>
              <button id="copySessionIdBtn" class="icon-btn" title="Copy session ID">
                <i class="fas fa-copy"></i>
              </button>
              <button id="copyInviteLinkBtn" class="icon-btn" title="Copier le lien d'invitation" disabled>
                <i class="fas fa-link"></i>
              </button>
            </div>
          </div>
          
          <div class="user-info">
            <div class="display-name-container">
              <i class="fas fa-user"></i>
              <span id="userDisplayName">User</span>
              <button id="editDisplayNameBtn" class="icon-btn" title="Change name">
                <i class="fas fa-edit"></i>
              </button>
              <button id="backToMenuBtn" class="icon-btn" title="Retour au menu">
                <i class="fas fa-home"></i>
              </button>
            </div>
          </div>
        </header>

        <!-- Error Message -->
        <div id="message" class="message hidden"></div>

        <!-- Voting Cards -->
        <section class="cards-section">
          <h2 class="section-title">Select Your Estimate</h2>
          <div id="cards" class="cards-container"></div>
        </section>

        <!-- Action Buttons -->
        <div class="actions">
          <button id="revealButton" class="btn btn-success btn-large">
            <i class="fas fa-eye"></i> Reveal Votes
          </button>
          <button id="resetButton" class="btn btn-danger btn-large">
            <i class="fas fa-redo"></i> New Round
          </button>
        </div>

        <!-- Results -->
        <section class="results-section">
          <div class="results-header">
            <h2 class="section-title">Participants</h2>
            <div id="statistics" class="statistics hidden"></div>
          </div>
          <div id="results" class="results-container"></div>
        </section>
      </div>
    </div>

    <!-- Socket.io client library -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="dist/app.js"></script>
  </body>
</html>
