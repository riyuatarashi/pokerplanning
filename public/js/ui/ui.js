// UI layer
(function(global){ const PP=global.PlanningPoker=global.PlanningPoker||{}; const { state }=PP; const refs=PP.refs={ setupScreen:document.getElementById('setupScreen'), pokerScreen:document.getElementById('pokerScreen'), displayNameInput:document.getElementById('displayNameInput'), createSessionBtn:document.getElementById('createSessionBtn'), joinSessionBtn:document.getElementById('joinSessionBtn'), sessionIdInput:document.getElementById('sessionIdInput'), sessionNameModal:document.getElementById('sessionNameModal'), sessionNameInput:document.getElementById('sessionNameInput'), confirmSessionNameBtn:document.getElementById('confirmSessionNameBtn'), editNameModal:document.getElementById('editNameModal'), editModalTitle:document.getElementById('editModalTitle'), editNameInput:document.getElementById('editNameInput'), confirmEditBtn:document.getElementById('confirmEditBtn'), cancelEditBtn:document.getElementById('cancelEditBtn'), sessionNameDisplay:document.getElementById('sessionNameDisplay'), sessionIdDisplay:document.getElementById('sessionIdDisplay'), userDisplayName:document.getElementById('userDisplayName'), editSessionNameBtn:document.getElementById('editSessionNameBtn'), editDisplayNameBtn:document.getElementById('editDisplayNameBtn'), copySessionIdBtn:document.getElementById('copySessionIdBtn'), copyInviteLinkBtn:document.getElementById('copyInviteLinkBtn'), cardsContainer:document.getElementById('cards'), messageEl:document.getElementById('message'), resultsEl:document.getElementById('results'), revealBtn:document.getElementById('revealButton'), resetBtn:document.getElementById('resetButton'), statisticsEl:document.getElementById('statistics') }; PP.UI={ showScreen(el){ [refs.setupScreen,refs.pokerScreen].forEach(e=>e&&e.classList.remove('active')); el&&el.classList.add('active'); }, showModal(m){ m&&m.classList.add('active'); }, hideModal(m){ m&&m.classList.remove('active'); }, toast(msg,type='success'){ const t=document.createElement('div'); t.className=`toast ${type}`; t.innerHTML=`<i class="fas fa-${type==='success'?'check-circle':'exclamation-circle'}"></i> ${msg}`; document.body.appendChild(t); setTimeout(()=>{ t.style.animation='slideInRight 0.3s ease reverse'; setTimeout(()=>t.remove(),300); },3000); }, updateSessionHeader(){ refs.sessionNameDisplay&&(refs.sessionNameDisplay.textContent=state.sessionName||'Planning Session'); refs.sessionIdDisplay&&(refs.sessionIdDisplay.textContent=state.sessionId||''); refs.userDisplayName&&(refs.userDisplayName.textContent=state.displayName||'User'); if(refs.copyInviteLinkBtn){ state.sessionId?refs.copyInviteLinkBtn.removeAttribute('disabled'):refs.copyInviteLinkBtn.setAttribute('disabled','disabled'); } if(refs.revealBtn){ state.joined?refs.revealBtn.removeAttribute('disabled'):refs.revealBtn.setAttribute('disabled','disabled'); } if(refs.resetBtn){ state.joined?refs.resetBtn.removeAttribute('disabled'):refs.resetBtn.setAttribute('disabled','disabled'); } }, clearCardSelection(){ document.querySelectorAll('.card').forEach(c=>c.classList.remove('selected')); }, restoreSelection(){ if(state.selectedValue===null)return; const card=document.querySelector(`.card[data-value="${state.selectedValue}"]`); if(card){ this.clearCardSelection(); card.classList.add('selected'); } } };})(window);

